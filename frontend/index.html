<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dial4Service ‚Äì Find Local Services Near You</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#f4f4f4}
a{text-decoration:none;color:#333}

.top-header{
 display:flex;justify-content:space-between;align-items:center;
 padding:10px 20px;background:#fff;border-bottom:1px solid #ddd
}
.location-box select,.location-box button{padding:6px}
.logo h1{margin:0;color:#0a66c2}
.logo small{font-size:12px;color:#555}
.menu a{margin-left:15px;font-weight:bold}

.search-header{
 background:#0a66c2;padding:15px;display:flex;gap:10px;justify-content:center
}
.search-header select,.search-header button{
 padding:10px;width:180px
}
.search-header button{
 background:#ffcc00;border:none;font-weight:bold;cursor:pointer
}

 .search-box{
  display:flex;
  gap:8px;
  align-items:center;
}

#nearMeBtn{
  background:#28a745;
  color:#fff;
  border:none;
  padding:10px 14px;
  cursor:pointer;
  border-radius:4px;
}

#nearMeBtn:hover{
  background:#1e7e34;
}

.ad-banner{
 margin:15px;background:#fff;padding:10px;text-align:center
}
.ad-banner img{width:100%;height:220px;object-fit:cover}

.section{background:#fff;margin:15px;padding:20px}
.categories{
 display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
 gap:15px
}
.category{
 text-align:center;padding:10px;background:#fafafa;border-radius:5px;
 cursor:pointer
}
.category img{width:60px;height:60px}

footer{
 background:#222;color:#fff;padding:20px;text-align:center
}
footer a{color:#ccc}
</style>
</head>

<body>

<!-- HEADER -->
<div class="top-header">
  <div class="location-box">
    üìç
    <select id="citySelect"></select>
    <button onclick="detectLocation()">Detect</button>
  </div>

  <div class="logo">
    <h1>Dial4Service</h1>
    <small>Find Trusted Local Services Near You</small>
  </div>

  <div class="menu">
    <a href="index.html">Home</a>
    <a href="search.html">All Businesses</a>
    <a href="provider/login.html">Add Business</a>
    <a href="#">Advertisement</a>
  </div>
</div>

<!-- SEARCH BAR -->
<div class="search-header">
  <select id="searchCity"></select>
  <select id="searchCategory"></select>
  <button onclick="search()">Search</button>
 <div class="search-box">
 </div>

  <input type="text" id="searchKeyword" placeholder="Search for services">

  <button id="searchBtn">Search</button>

  <!-- üìç Search Near Me -->
  <button id="nearMeBtn" title="Search near your location">
    üìç Near Me
  </button>

</div>

<!-- AD BANNER -->
<div class="ad-banner" id="adBanner">
  <p>Loading Advertisement...</p>
</div>

<!-- POPULAR CATEGORIES -->
<div class="section">
  <h2>Popular Categories</h2>
  <div class="categories" id="categoryList"></div>
</div>

<!-- FOOTER -->
<footer>
 <p><strong>Dial4Service</strong></p>
 <p>India‚Äôs trusted local service directory</p>
 <p>¬© 2026 Dial4Service</p>
</footer>

<script>
const API = "https://dial4service.onrender.com/api";

/* LOAD CITIES */
fetch(API+"/cities")
.then(r=>r.json())
.then(data=>{
 let opt='<option value="">Select City</option>';
 data.forEach(c=>{
  opt+=`<option value="${c.name}">${c.name}</option>`;
 });
 citySelect.innerHTML=opt;
 searchCity.innerHTML=opt;
});

/* LOAD CATEGORIES */
fetch(API+"/categories")
.then(r=>r.json())
.then(data=>{
 let opt='<option value="">Select Category</option>';
 let cards='';
 data.forEach(cat=>{
  opt+=`<option value="${cat.name}">${cat.name}</option>`;
  cards+=`
   <div class="category" onclick="goCategory('${cat.name}')">
    <img src="${cat.image}">
    <p>${cat.name}</p>
   </div>`;
 });
 searchCategory.innerHTML=opt;
 categoryList.innerHTML=cards;
});

/* LOAD ACTIVE AD */
fetch(API+"/ads/active")
.then(r=>r.json())
.then(ad=>{
 if(!ad) return adBanner.innerHTML="No Advertisement";
 adBanner.innerHTML=`<img src="${ad.image}">`;
});

/* SEARCH */
function search(){
 const city=searchCity.value;
 const cat=searchCategory.value;
 location.href=`search.html?city=${city}&category=${cat}`;
 <button onclick="nearMe()">Near Me</button>

}

function goCategory(cat){
 location.href=`search.html?category=${cat}`;
}

// Normal Search
document.getElementById("searchBtn").addEventListener("click", function(){
  const keyword = searchKeyword.value.trim();
  if(!keyword){
    alert("Please enter search keyword");
    return;
  }
  window.location.href = "search.html?q=" + encodeURIComponent(keyword);
});

// üìç Search Near Me
document.getElementById("nearMeBtn").addEventListener("click", function(){

  if(!navigator.geolocation){
    alert("Geolocation not supported");
    return;
  }

  navigator.geolocation.getCurrentPosition(
    function(position){
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;

      // Redirect with location
      window.location.href =
        `search-near-me.html?lat=${lat}&lng=${lng}`;
    },
    function(){
      alert("Location permission denied");
    }
  );

});

/* LOCATION */
function detectLocation(){
 if(navigator.geolocation){
  navigator.geolocation.getCurrentPosition(()=>{
   alert("Location detected (use near me search)");
  });
 }
}

function nearMe(){
  if(!navigator.geolocation){
    alert("GPS supported nahi hai");
    return;
  }

  navigator.geolocation.getCurrentPosition(
    position=>{
      const lat = position.coords.latitude;
      const lng = position.coords.longitude;

      // search page par redirect
      window.location.href =
        `search.html?lat=${lat}&lng=${lng}`;
    },
    ()=>{
      alert("Location permission allow karein");
    }
  );
}
</script>


</body>
</html>



